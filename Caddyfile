# Caddy configuration for api.spytech.am (webhook server)
api.spytech.am {
    encode zstd gzip
    
    # Webhook endpoint for Telegram
    @webhook path /webhook/*
    handle @webhook {
        reverse_proxy bot:8080
    }
    
    # Health check endpoint
    handle_path /healthz* {
        reverse_proxy bot:8080
    }
    
    # Booking submission endpoint - receives requests from spytech.am
    handle_path /api/booking/* {
        reverse_proxy bot:8080
    }
    
    # Default response
    respond "OK" 200
}
